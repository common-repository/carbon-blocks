(()=>{"use strict";const e=window.wp.i18n,t=window.wp.element,o=window.wp.components,i=window.wp.blockEditor,n=window.wp.compose,a=window.wp.primitives,l=window.ReactJSXRuntime,r=(0,n.createHigherOrderComponent)((n=>r=>{const{attributes:s,setAttributes:c}=r,{animation:d}=s,b=(0,t.useRef)(),p=(0,t.useRef)(),[m,u]=(0,t.useState)(!1),_=()=>{c({animation:{...d,delay:0,duration:500,repeat:!1}})},h=[{label:(0,e.__)("Default","carbon-blocks"),help:(0,e.__)("","carbon-blocks"),options:[{label:(0,e.__)("Linear","carbon-blocks"),slug:"linear",path:"M1 84L124 0"},{label:(0,e.__)("Ease","carbon-blocks"),slug:"ease",path:"M1 84C60 55 53.75 0 124 1"}]},{label:(0,e.__)("Ease","carbon-blocks"),options:[{label:(0,e.__)("In","carbon-blocks"),slug:"ease-in",path:"M 1 84 c 43 -1 57 -2 123 -83"},{label:(0,e.__)("Out","carbon-blocks"),slug:"ease-out",path:"M 0 84 C 64 8 73 4 123 0"},{label:(0,e.__)("In | Out","carbon-blocks"),slug:"ease-in-out",path:"M 0 84 C 68 84 55 1 123 0"}]}],g=()=>{setTimeout((()=>{const e=(e=>e.querySelector(".block-editor-block-preview__content")?e.querySelector(".block-editor-block-preview__content iframe").contentWindow.document:e.querySelector(".edit-site-visual-editor")?e.querySelector(".edit-site-visual-editor iframe").contentWindow.document:e.querySelector(".edit-site-editor-canvas-container")?e.querySelector(".edit-site-editor-canvas-container iframe").contentWindow.document:e.querySelector(".edit-post-visual-editor")?e.querySelector(".edit-post-visual-editor iframe")?e.querySelector(".edit-post-visual-editor iframe").contentWindow.document:e.querySelector(".edit-post-visual-editor"):void 0)(document).querySelector(`[data-block="${r.clientId}"]`);e.classList.remove("anim"),e.classList.add("is-hidden"),e.removeAttribute("data-anim-delay"),e.setAttribute("data-anim",d.type),e.setAttribute("data-anim-duration",d.duration),e.setAttribute("data-anim-easing",d.easing),setTimeout((()=>{e.classList.remove("is-hidden"),e.classList.add("anim"),setTimeout((()=>{e.removeAttribute("data-anim")}),d.duration)}),100)}),200)};return d?(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(n,{...r,ref:p}),m&&(0,l.jsx)(o.Modal,{className:"carbon-blocks-animation-modal",title:(0,e.__)("Preview block animation","carbon-blocks"),onRequestClose:()=>u(!1),children:(0,l.jsx)(o.Button,{__next40pxDefaultSize:!0,variant:"primary",style:{textAlign:"center",display:"block",width:"100%"},onClick:g,ref:b,children:(0,e.__)("Replay animation","carbon-blocks")})}),(0,l.jsx)(i.InspectorControls,{children:(0,l.jsxs)(o.PanelBody,{title:(0,e.__)("Animation","carbon"),initialOpen:!0,icon:"video-alt",children:[(0,l.jsx)(o.ToggleControl,{label:(0,e.__)("Activate animation","carbon-blocks"),checked:d.isActive,onChange:()=>c({animation:{...d,isActive:!d.isActive}}),help:(0,e.__)("Animate the block when he shows up on the screen.","carbon-blocks")}),d.isActive&&(0,l.jsx)(o.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,e.__)("Delay and repeat are not visible in preview.","carbon-blocks"),children:(0,l.jsx)(o.Button,{__next40pxDefaultSize:!0,variant:"primary",style:{textAlign:"center",display:"block",width:"100%"},onClick:g,children:(0,e.__)("Preview animation","carbon-blocks")})}),d.isActive&&(0,l.jsx)(o.TabPanel,{orientation:"horizontal",initialTabName:"type",__nextHasNoMarginBottom:!0,tabs:[{name:"type",title:"Type"},{name:"timing",title:"Timing"},{name:"easing",title:"Easing"}],children:t=>{switch(t.name){case"type":return(0,l.jsxs)(o.PanelBody,{children:[(0,l.jsx)(o.__experimentalToggleGroupControl,{isBlock:!0,label:"Default",value:d.type,onChange:e=>c({animation:{...d,type:e}}),__nextHasNoMarginBottom:!0,children:(0,l.jsx)(o.__experimentalToggleGroupControlOption,{label:"Fade in",value:"fade"})}),(0,l.jsx)(o.__experimentalToggleGroupControl,{isBlock:!0,label:"Slinding animation",value:d.type,onChange:e=>c({animation:{...d,type:e}}),__nextHasNoMarginBottom:!0,children:(0,l.jsx)(o.__experimentalToggleGroupControlOption,{label:"Up",value:"slide-up"})})]});case"timing":return(0,l.jsxs)(o.PanelBody,{children:[(0,l.jsx)(o.ToggleControl,{label:(0,e.__)("Repeat animation","carbon-blocks"),checked:d.repeat,onChange:()=>c({animation:{...d,repeat:!d.repeat}}),help:(0,e.__)("Defines if animation should repeat every time it appears on the screen.","carbon-blocks")}),(0,l.jsx)(o.RangeControl,{help:(0,e.__)("Time before the animation triggers (in ms).","carbon-blocks"),initialPosition:d.delay,label:(0,e.__)("Delay speed","carbon-blocks"),max:1e3,min:0,step:100,onChange:e=>c({animation:{...d,delay:e}})}),(0,l.jsx)(o.RangeControl,{help:(0,e.__)("Animation duration time (in ms).","carbon-blocks"),initialPosition:d.duration,label:(0,e.__)("Duration speed","carbon-blocks"),max:2e3,min:0,step:100,onChange:e=>c({animation:{...d,duration:e}})}),(0,l.jsx)(o.Button,{__next40pxDefaultSize:!0,isDestructive:!0,style:{display:"block",textAlign:"center",width:"100%"},onClick:_,children:(0,e.__)("Reset timings to default","carbon-blocks")})]});case"easing":return(0,l.jsxs)(o.PanelBody,{children:[(0,l.jsx)(o.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,e.__)("Easing controls how your animation will behave. Hover any label to see the Cubic Bezier Curve.","carbon-blocks")}),h.map((e=>(0,l.jsx)(o.__experimentalToggleGroupControl,{isBlock:!0,label:e.label,value:d.easing,onChange:e=>c({animation:{...d,easing:e}}),__nextHasNoMarginBottom:!0,help:e?.help,children:e.options.map((e=>(0,l.jsx)(o.__experimentalToggleGroupControlOption,{label:e.label,value:e.slug,"aria-label":(0,l.jsx)(a.SVG,{viewBox:"0 0 125 85",xmlns:"http://www.w3.org/2000/svg",width:"100px",height:"auto",children:(0,l.jsx)(a.Path,{d:e.path,fill:"none",stroke:"currentColor",strokeWidth:"3px",strokeLinecap:"round "})}),showTooltip:!0})))})))]})}}})]})})]}):(0,l.jsx)(n,{...r})}),"animation");wp.hooks.addFilter("editor.BlockEdit","carbon-blocks/animation",r)})();